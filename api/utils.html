<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>其他工具 (Utils) | Koishi</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/koishi.png">
    <meta name="description" content="">
    <meta name="theme-color" content="#5546a3">
    <link rel="preload" href="/assets/css/0.styles.484e0fa5.css" as="style"><link rel="preload" href="/assets/js/app.70e70a81.js" as="script"><link rel="preload" href="/assets/js/2.a5c80c03.js" as="script"><link rel="preload" href="/assets/js/7.5c9776f1.js" as="script"><link rel="preload" href="/assets/js/24.c81399e4.js" as="script"><link rel="preload" href="/assets/js/5.e097d7d7.js" as="script"><link rel="preload" href="/assets/js/6.92d33830.js" as="script"><link rel="prefetch" href="/assets/js/10.d324927d.js"><link rel="prefetch" href="/assets/js/11.82d92c92.js"><link rel="prefetch" href="/assets/js/12.0ce46b66.js"><link rel="prefetch" href="/assets/js/13.fc97ad59.js"><link rel="prefetch" href="/assets/js/14.680aa48e.js"><link rel="prefetch" href="/assets/js/15.784a150c.js"><link rel="prefetch" href="/assets/js/16.2dc21011.js"><link rel="prefetch" href="/assets/js/17.f5a3572a.js"><link rel="prefetch" href="/assets/js/18.defcbaf9.js"><link rel="prefetch" href="/assets/js/19.3a87b024.js"><link rel="prefetch" href="/assets/js/20.4594b3d7.js"><link rel="prefetch" href="/assets/js/21.01bc5824.js"><link rel="prefetch" href="/assets/js/22.b73eb08f.js"><link rel="prefetch" href="/assets/js/23.bdf5bfdf.js"><link rel="prefetch" href="/assets/js/25.0320e6f5.js"><link rel="prefetch" href="/assets/js/26.3e3a8175.js"><link rel="prefetch" href="/assets/js/27.c523500d.js"><link rel="prefetch" href="/assets/js/28.fe8a5879.js"><link rel="prefetch" href="/assets/js/29.3abd9a59.js"><link rel="prefetch" href="/assets/js/3.40a71061.js"><link rel="prefetch" href="/assets/js/30.756a856b.js"><link rel="prefetch" href="/assets/js/31.3edd898d.js"><link rel="prefetch" href="/assets/js/32.1d37cda8.js"><link rel="prefetch" href="/assets/js/33.3d0bca20.js"><link rel="prefetch" href="/assets/js/34.99bfb22b.js"><link rel="prefetch" href="/assets/js/35.e882c0e0.js"><link rel="prefetch" href="/assets/js/36.978b7f60.js"><link rel="prefetch" href="/assets/js/37.1da503d7.js"><link rel="prefetch" href="/assets/js/38.f744c379.js"><link rel="prefetch" href="/assets/js/39.a7777f6c.js"><link rel="prefetch" href="/assets/js/4.51582357.js"><link rel="prefetch" href="/assets/js/40.ebf7b06e.js"><link rel="prefetch" href="/assets/js/41.52377d44.js"><link rel="prefetch" href="/assets/js/42.4c0f2b01.js"><link rel="prefetch" href="/assets/js/43.6a41cfbf.js"><link rel="prefetch" href="/assets/js/44.1cf884af.js"><link rel="prefetch" href="/assets/js/45.17b0c5e3.js"><link rel="prefetch" href="/assets/js/46.d5b1fd8e.js"><link rel="prefetch" href="/assets/js/47.f1d44b5e.js"><link rel="prefetch" href="/assets/js/48.399b5784.js"><link rel="prefetch" href="/assets/js/49.13e5d760.js"><link rel="prefetch" href="/assets/js/50.4333a2a4.js"><link rel="prefetch" href="/assets/js/51.89288e9f.js"><link rel="prefetch" href="/assets/js/52.21fad065.js"><link rel="prefetch" href="/assets/js/53.d9b187be.js"><link rel="prefetch" href="/assets/js/54.4cd6699b.js"><link rel="prefetch" href="/assets/js/55.b98d7eb2.js"><link rel="prefetch" href="/assets/js/56.cac54bbd.js"><link rel="prefetch" href="/assets/js/8.7c8baa81.js"><link rel="prefetch" href="/assets/js/9.fc0d0721.js">
    <link rel="stylesheet" href="/assets/css/0.styles.484e0fa5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/koishi.png" alt="Koishi" class="logo"> <span class="site-name can-hide">Koishi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">
  官方插件
</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">
  官方插件
</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/api/" aria-current="page" class="sidebar-link">总览</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>核心 API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/context.html" class="sidebar-link">上下文 (Context)</a></li><li><a href="/api/app.html" class="sidebar-link">应用 (App)</a></li><li><a href="/api/bot.html" class="sidebar-link">机器人 (Bot)</a></li><li><a href="/api/event.html" class="sidebar-link">接收器 (Receiver)</a></li><li><a href="/api/session.html" class="sidebar-link">会话 (Session)</a></li><li><a href="/api/command.html" class="sidebar-link">指令 (Command)</a></li><li><a href="/api/database.html" class="sidebar-link">数据库 (Database)</a></li><li><a href="/api/global.html" class="sidebar-link">全局 API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>其他官方包</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/utils.html" aria-current="page" class="active sidebar-link">其他工具 (Utils)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#noop" class="sidebar-link">noop()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#sleep" class="sidebar-link">sleep()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#isinteger" class="sidebar-link">isInteger()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#观察者对象" class="sidebar-link">观察者对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#observe" class="sidebar-link">observe()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#observer-diff" class="sidebar-link">observer._diff</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#observer-merge" class="sidebar-link">observer._merge()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#observer-update" class="sidebar-link">observer._update()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-操作" class="sidebar-link">CQCode 操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-escape" class="sidebar-link">CQCode.escape()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-unescape" class="sidebar-link">CQCode.unescape()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-stringify" class="sidebar-link">CQCode.stringify()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-stringifyall" class="sidebar-link">CQCode.stringifyAll()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-parse" class="sidebar-link">CQCode.parse()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#cqcode-parseall" class="sidebar-link">CQCode.parseAll()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#字符串操作" class="sidebar-link">字符串操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#simplify" class="sidebar-link">simplify()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#traditionalize" class="sidebar-link">traditionalize()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#capitalize" class="sidebar-link">capitalize()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#camelcase" class="sidebar-link">camelCase()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#paramcase" class="sidebar-link">paramCase()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#snakecase" class="sidebar-link">snakeCase()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#日期操作" class="sidebar-link">日期操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#getdatenumber" class="sidebar-link">getDateNumber()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#fromdatenumber" class="sidebar-link">fromDateNumber()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#集合操作" class="sidebar-link">集合操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#contain" class="sidebar-link">contain()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#intersection" class="sidebar-link">intersection()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#difference" class="sidebar-link">difference()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#union" class="sidebar-link">union()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/utils.html#随机数操作" class="sidebar-link">随机数操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/utils.html#randombool" class="sidebar-link">randomBool()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#randomid" class="sidebar-link">randomId()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#randomreal" class="sidebar-link">randomReal()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#randomint" class="sidebar-link">randomInt()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#randompick" class="sidebar-link">randomPick()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#randomsplice" class="sidebar-link">randomSplice()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#randommultipick" class="sidebar-link">randomMultiPick()</a></li><li class="sidebar-sub-header"><a href="/api/utils.html#randomweightedpick" class="sidebar-link">randomWeightedPick()</a></li></ul></li></ul></li><li><a href="/api/test-utils.html" class="sidebar-link">测试工具 (Test Utils)</a></li><li><a href="/api/database/memory.html" class="sidebar-link">数据库：memory</a></li><li><a href="/api/database/mysql.html" class="sidebar-link">数据库：MySQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>更新与迁移</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/changelog.html" class="sidebar-link">v2 更新日志</a></li><li><a href="/api/migration.html" class="sidebar-link">从 v1 迁移</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="其他工具"><a href="#其他工具" class="header-anchor">#</a> 其他工具 (Utils)</h1> <div class="custom-block danger"><p class="custom-block-title">注意</p> <p>这里是<strong>正在施工</strong>的 koishi v2 的文档。要查看 v1 版本的文档，请前往<a href="https://koishijs.github.io/v1/" target="_blank" rel="noopener noreferrer"><strong>这里</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></div> <p>包含了被 Koishi 使用的工具函数，它们由 <code>koishi-utils</code> 包提供。</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>本页显示的版本号都表示对应的 koishi-utils 版本号（而不是对应的 koishi 版本号）。</p></div> <h2 id="noop"><a href="#noop" class="header-anchor">#</a> noop()</h2> <p>不进行任何操作（no operation）。</p> <ul><li>返回值: <code>void</code></li></ul> <h2 id="sleep"><a href="#sleep" class="header-anchor">#</a> sleep(ms?)</h2> <p>等待一段时间。</p> <ul><li><strong>ms:</strong> <code>number</code> 要等待的毫秒数</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h2 id="isinteger"><a href="#isinteger" class="header-anchor">#</a> isInteger(value)</h2> <p>判断传入的值是否为整数。</p> <ul><li><strong>value:</strong> <code>any</code> 要判断的值</li> <li>返回值: <code>boolean</code> 是否为整数</li></ul> <h2 id="观察者对象"><a href="#观察者对象" class="header-anchor">#</a> 观察者对象</h2> <h3 id="observe"><a href="#observe" class="header-anchor">#</a> observe(target, update?, label?)</h3> <p>创建一个观察者对象。目前只支持从普通对象创建（不支持 Array / Set / Map）。</p> <ul><li><strong>target:</strong> <code>T extends object</code> 要观测的对象</li> <li><strong>update:</strong> <code>(diff: Partial&lt;T&gt;) =&gt; R</code> 更新回调函数</li> <li><strong>label:</strong> <code>string</code> 对象的标签，用于标识</li> <li>返回值: <code>Observed&lt;T&gt;</code></li></ul> <h3 id="observer-diff"><a href="#observer-diff" class="header-anchor">#</a> observer._diff</h3> <p>观察者当前的对象变化。</p> <h3 id="observer-merge"><a href="#observer-merge" class="header-anchor">#</a> observer._merge(source)</h3> <p>将某些属性合并入当前观察者，不会触发 diff 更新。</p> <ul><li><strong>source:</strong> <code>object</code> 要合并的对象</li> <li>返回值: <code>this</code></li></ul> <h3 id="observer-update"><a href="#observer-update" class="header-anchor">#</a> observer._update()</h3> <p>更新观察者对象，同时清除 diff。</p> <ul><li>返回值: <code>R</code></li></ul> <h2 id="cqcode-操作"><a href="#cqcode-操作" class="header-anchor">#</a> CQCode 操作</h2> <p>CQCode 结构如下：</p> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">CQCode</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  type</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  data</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Record</span><span style="color:#F8F8F2;">&lt;</span><span style="color:#66D9EF;">string</span><span style="color:#F8F8F2;">, </span><span style="color:#66D9EF;">string</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span><span style="color:#F8F8F2;">&gt;</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="cqcode-escape"><a href="#cqcode-escape" class="header-anchor">#</a> CQCode.escape(source, insideCQ?)</h3> <p>转义一段文本到 CQ 码格式。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li><strong>insideCQ:</strong> <code>boolean</code> 在 CQ 码内部转义（会额外处理逗号）</li> <li>返回值: <code>string</code> 转义过后的文本</li></ul> <h3 id="cqcode-unescape"><a href="#cqcode-unescape" class="header-anchor">#</a> CQCode.unescape(souce)</h3> <p>取消一段文本的 CQ 码转义。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 转义前的文本</li></ul> <h3 id="cqcode-stringify"><a href="#cqcode-stringify" class="header-anchor">#</a> CQCode.stringify(type, data)</h3> <p>将一个对象转化成 CQ 码文本。</p> <ul><li><strong>type:</strong> <code>string</code> CQ 码类型</li> <li><strong>data:</strong> <code>object</code> CQ 码参数</li> <li>返回值: <code>string</code> 生成的 CQ 码</li></ul> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>类型为 text 的 CQ 码将直接被转化为 <code>data.text</code> 输出。</p></div> <h3 id="cqcode-stringifyall"><a href="#cqcode-stringifyall" class="header-anchor">#</a> CQCode.stringifyAll(codes) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.0.2+</span></h3> <p>将多个 CQCode 对象转化成文本并连接。</p> <ul><li><strong>codes:</strong> <code>CQCode[]</code> CQ 码数组</li> <li>返回值: <code>string</code> 生成的文本</li></ul> <h3 id="cqcode-parse"><a href="#cqcode-parse" class="header-anchor">#</a> CQCode.parse(source)</h3> <p>将一个 CQ 码文本解析成对象。</p> <ul><li><strong>source:</strong> <code>string</code> CQ 码</li> <li>返回值: <code>CQCode</code> CQ 码的类型和参数</li></ul> <h3 id="cqcode-parseall"><a href="#cqcode-parseall" class="header-anchor">#</a> CQCode.parseAll(source) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>1.0.2+</span></h3> <p>解析一段文本内的全部 CQ 码。其中的纯文本将会解析成 text 类型。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>CQCode[]</code> CQ 码数组</li></ul> <h2 id="字符串操作"><a href="#字符串操作" class="header-anchor">#</a> 字符串操作</h2> <h3 id="simplify"><a href="#simplify" class="header-anchor">#</a> simplify(source)</h3> <p>繁体转简体。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 简体文本</li></ul> <h3 id="traditionalize"><a href="#traditionalize" class="header-anchor">#</a> traditionalize(source)</h3> <p>简体转繁体。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 繁体文本</li></ul> <h3 id="capitalize"><a href="#capitalize" class="header-anchor">#</a> capitalize(source)</h3> <p>首字母大写。</p> <ul><li><strong>source:</strong> <code>string</code> 源文本</li> <li>返回值: <code>string</code> 首字母大写后的文本</li></ul> <h3 id="camelcase"><a href="#camelcase" class="header-anchor">#</a> camelCase(source)</h3> <p>如果输入的是字符串，则将字符串转换成 camelCase；如果是数组或对象，则递归地将对象中的每个（可枚举）的键转换成 camelCase；其他情况不受影响。</p> <ul><li><strong>source:</strong> <code>any</code> 要转换的内容</li> <li>返回值: <code>any</code> 转换结果</li></ul> <h3 id="paramcase"><a href="#paramcase" class="header-anchor">#</a> paramCase(source)</h3> <p>如果输入的是字符串，则将字符串转换成 param-case；如果是数组或对象，则递归地将对象中的每个（可枚举）的键转换成 param-case；其他情况不受影响。</p> <ul><li><strong>source:</strong> <code>any</code> 要转换的内容</li> <li>返回值: <code>any</code> 转换结果</li></ul> <h3 id="snakecase"><a href="#snakecase" class="header-anchor">#</a> snakeCase(source)</h3> <p>如果输入的是字符串，则将字符串转换成 snake_case；如果是数组或对象，则递归地将对象中的每个（可枚举）的键转换成 snake_case；其他情况不受影响。</p> <ul><li><strong>source:</strong> <code>any</code> 要转换的内容</li> <li>返回值: <code>any</code> 转换结果</li></ul> <h2 id="日期操作"><a href="#日期操作" class="header-anchor">#</a> 日期操作</h2> <h3 id="getdatenumber"><a href="#getdatenumber" class="header-anchor">#</a> getDateNumber(date?)</h3> <p>获取当前日期（从 UNIX 时间开始时计算）。</p> <ul><li><strong>date:</strong> <code>Date</code> 日期对象，默认为 <code>new Date()</code></li> <li>返回值: <code>number</code> UNIX 时间开始后的天数</li></ul> <h3 id="fromdatenumber"><a href="#fromdatenumber" class="header-anchor">#</a> fromDateNumber(value)</h3> <p>从 UNIX 时间开始后的天数计算日期对象。</p> <ul><li><strong>value:</strong> <code>number</code> UNIX 时间开始后的天数</li> <li>返回值: <code>Date</code> 日期对象</li></ul> <h2 id="集合操作"><a href="#集合操作" class="header-anchor">#</a> 集合操作</h2> <h3 id="contain"><a href="#contain" class="header-anchor">#</a> contain(array1, array2)</h3> <p>检测集合的包含关系。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>boolean</code> 数组 1 是否包含数组 2 的全部元素</li></ul> <h3 id="intersection"><a href="#intersection" class="header-anchor">#</a> intersection(array1, array2)</h3> <p>求两个集合的交集。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>any[]</code> 两个数组的交集</li></ul> <h3 id="difference"><a href="#difference" class="header-anchor">#</a> difference(array1, array2)</h3> <p>求两个集合的差集。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>any[]</code> 两个数组的差集</li></ul> <h3 id="union"><a href="#union" class="header-anchor">#</a> union(array1, array2)</h3> <p>求两个集合的并集。</p> <ul><li><strong>array1:</strong> <code>readonly any[]</code> 数组 1</li> <li><strong>array2:</strong> <code>readonly any[]</code> 数组 2</li> <li>返回值: <code>any[]</code> 两个数组的并集</li></ul> <h2 id="随机数操作"><a href="#随机数操作" class="header-anchor">#</a> 随机数操作</h2> <h3 id="randombool"><a href="#randombool" class="header-anchor">#</a> randomBool(probability)</h3> <p>生成一个随机布尔值，有 probability 的概率为 1。</p> <ul><li><strong>probability:</strong> <code>number</code> 概率</li> <li>返回值: <code>boolean</code> 随机布尔值</li></ul> <h3 id="randomid"><a href="#randomid" class="header-anchor">#</a> randomId(length?)</h3> <p>生成一个随机 ID，由数字和大小写字母构成，长度为 length。</p> <ul><li><strong>length:</strong> <code>number</code> ID 长度，默认为 16</li> <li>返回值: <code>string</code> 生成的 ID</li></ul> <h3 id="randomreal"><a href="#randomreal" class="header-anchor">#</a> randomReal(start?, end)</h3> <p>生成一个随机实数。</p> <ul><li><strong>start:</strong> <code>number</code> 下界，默认为 0</li> <li><strong>end:</strong> <code>end</code> 上界</li> <li>返回值: <code>number</code> 一个 [start, end) 之间的随机实数</li></ul> <h3 id="randomint"><a href="#randomint" class="header-anchor">#</a> randomInt(start?, end)</h3> <p>生成一个随机实数。</p> <ul><li><strong>start:</strong> <code>number</code> 下界，默认为 0</li> <li><strong>end:</strong> <code>end</code> 上界</li> <li>返回值: <code>number</code> 一个 [start, end) 之间的随机整数</li></ul> <h3 id="randompick"><a href="#randompick" class="header-anchor">#</a> randomPick(array)</h3> <p>从数组中随机挑出一个元素，不改变原数组。</p> <ul><li><strong>array:</strong> <code>readonly T[]</code> 数组</li> <li>返回值: <code>T</code> 挑出的元素</li></ul> <h3 id="randomsplice"><a href="#randomsplice" class="header-anchor">#</a> randomSplice(array)</h3> <p>从数组中随机删掉一个元素，返回删掉的元素。</p> <ul><li><strong>array:</strong> <code>T[]</code> 数组</li> <li>返回值: <code>T</code> 挑出的元素</li></ul> <h3 id="randommultipick"><a href="#randommultipick" class="header-anchor">#</a> randomMultiPick(array, count) <span class="badge warn" style="vertical-align:top;" data-v-15b7b770>beta</span></h3> <p>从数组中随机挑出一些元素，不改变原数组。</p> <ul><li><strong>array:</strong> <code>readonly T[]</code> 数组</li> <li><strong>count:</strong> <code>number</code> 元素个数</li> <li>返回值: <code>T[]</code> 挑出的元素列表</li></ul> <h3 id="randomweightedpick"><a href="#randomweightedpick" class="header-anchor">#</a> randomWeightedPick(weights, value?) <span class="badge warn" style="vertical-align:top;" data-v-15b7b770>beta</span></h3> <p>按照权重随机挑出一个元素。</p> <ul><li><strong>weights:</strong> <code>Record&lt;T, number&gt;</code> 权重表</li> <li><strong>value:</strong> <code>number</code> 一个 0 到 1 之间的随机数，默认为 <code>Math.random()</code></li> <li>返回值: <code>T</code> 挑出的元素</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/koishijs/koishijs.github.io/edit/docs/api/utils.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/3/2020, 2:05:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/global.html" class="prev">
        全局 API
      </a></span> <span class="next"><a href="/api/test-utils.html">
        测试工具 (Test Utils)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.70e70a81.js" defer></script><script src="/assets/js/2.a5c80c03.js" defer></script><script src="/assets/js/7.5c9776f1.js" defer></script><script src="/assets/js/24.c81399e4.js" defer></script><script src="/assets/js/5.e097d7d7.js" defer></script><script src="/assets/js/6.92d33830.js" defer></script>
  </body>
</html>
