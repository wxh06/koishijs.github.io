<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>机器人 (Bot) | Koishi</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/koishi.png">
    <meta name="description" content="">
    <meta name="theme-color" content="#5546a3">
    <link rel="preload" href="/assets/css/0.styles.484e0fa5.css" as="style"><link rel="preload" href="/assets/js/app.70e70a81.js" as="script"><link rel="preload" href="/assets/js/2.a5c80c03.js" as="script"><link rel="preload" href="/assets/js/7.5c9776f1.js" as="script"><link rel="preload" href="/assets/js/11.82d92c92.js" as="script"><link rel="preload" href="/assets/js/6.92d33830.js" as="script"><link rel="preload" href="/assets/js/5.e097d7d7.js" as="script"><link rel="prefetch" href="/assets/js/10.d324927d.js"><link rel="prefetch" href="/assets/js/12.0ce46b66.js"><link rel="prefetch" href="/assets/js/13.fc97ad59.js"><link rel="prefetch" href="/assets/js/14.680aa48e.js"><link rel="prefetch" href="/assets/js/15.784a150c.js"><link rel="prefetch" href="/assets/js/16.2dc21011.js"><link rel="prefetch" href="/assets/js/17.f5a3572a.js"><link rel="prefetch" href="/assets/js/18.defcbaf9.js"><link rel="prefetch" href="/assets/js/19.3a87b024.js"><link rel="prefetch" href="/assets/js/20.4594b3d7.js"><link rel="prefetch" href="/assets/js/21.01bc5824.js"><link rel="prefetch" href="/assets/js/22.b73eb08f.js"><link rel="prefetch" href="/assets/js/23.bdf5bfdf.js"><link rel="prefetch" href="/assets/js/24.c81399e4.js"><link rel="prefetch" href="/assets/js/25.0320e6f5.js"><link rel="prefetch" href="/assets/js/26.3e3a8175.js"><link rel="prefetch" href="/assets/js/27.c523500d.js"><link rel="prefetch" href="/assets/js/28.fe8a5879.js"><link rel="prefetch" href="/assets/js/29.3abd9a59.js"><link rel="prefetch" href="/assets/js/3.40a71061.js"><link rel="prefetch" href="/assets/js/30.756a856b.js"><link rel="prefetch" href="/assets/js/31.3edd898d.js"><link rel="prefetch" href="/assets/js/32.1d37cda8.js"><link rel="prefetch" href="/assets/js/33.3d0bca20.js"><link rel="prefetch" href="/assets/js/34.99bfb22b.js"><link rel="prefetch" href="/assets/js/35.e882c0e0.js"><link rel="prefetch" href="/assets/js/36.978b7f60.js"><link rel="prefetch" href="/assets/js/37.1da503d7.js"><link rel="prefetch" href="/assets/js/38.f744c379.js"><link rel="prefetch" href="/assets/js/39.a7777f6c.js"><link rel="prefetch" href="/assets/js/4.51582357.js"><link rel="prefetch" href="/assets/js/40.ebf7b06e.js"><link rel="prefetch" href="/assets/js/41.52377d44.js"><link rel="prefetch" href="/assets/js/42.4c0f2b01.js"><link rel="prefetch" href="/assets/js/43.6a41cfbf.js"><link rel="prefetch" href="/assets/js/44.1cf884af.js"><link rel="prefetch" href="/assets/js/45.17b0c5e3.js"><link rel="prefetch" href="/assets/js/46.d5b1fd8e.js"><link rel="prefetch" href="/assets/js/47.f1d44b5e.js"><link rel="prefetch" href="/assets/js/48.399b5784.js"><link rel="prefetch" href="/assets/js/49.13e5d760.js"><link rel="prefetch" href="/assets/js/50.4333a2a4.js"><link rel="prefetch" href="/assets/js/51.89288e9f.js"><link rel="prefetch" href="/assets/js/52.21fad065.js"><link rel="prefetch" href="/assets/js/53.d9b187be.js"><link rel="prefetch" href="/assets/js/54.4cd6699b.js"><link rel="prefetch" href="/assets/js/55.b98d7eb2.js"><link rel="prefetch" href="/assets/js/56.cac54bbd.js"><link rel="prefetch" href="/assets/js/8.7c8baa81.js"><link rel="prefetch" href="/assets/js/9.fc0d0721.js">
    <link rel="stylesheet" href="/assets/css/0.styles.484e0fa5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/koishi.png" alt="Koishi" class="logo"> <span class="site-name can-hide">Koishi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">
  官方插件
</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/getting-started.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  API
</a></div><div class="nav-item"><a href="/plugins/" class="nav-link">
  官方插件
</a></div><div class="nav-item"><a href="https://github.com/koishijs/koishi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/api/" aria-current="page" class="sidebar-link">总览</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>核心 API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/context.html" class="sidebar-link">上下文 (Context)</a></li><li><a href="/api/app.html" class="sidebar-link">应用 (App)</a></li><li><a href="/api/bot.html" aria-current="page" class="active sidebar-link">机器人 (Bot)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/bot.html#属性" class="sidebar-link">属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/bot.html#构造选项" class="sidebar-link">构造选项</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-app" class="sidebar-link">bot.app</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-version" class="sidebar-link">bot.version</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/bot.html#消息相关" class="sidebar-link">消息相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/bot.html#bot-sendmsg" class="sidebar-link">bot.sendMsg()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-sendprivatemsg" class="sidebar-link">bot.sendPrivateMsg()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-sendgroupmsg" class="sidebar-link">bot.sendGroupMsg()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-sendgroupforwardmsg" class="sidebar-link">bot.sendGroupForwardMsg()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-deletemsg" class="sidebar-link">bot.deleteMsg()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-sendlike" class="sidebar-link">bot.sendLike()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getgroupmsg" class="sidebar-link">bot.getGroupMsg()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getforwardmsg" class="sidebar-link">bot.getForwardMsg()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/bot.html#群相关" class="sidebar-link">群相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupkick" class="sidebar-link">bot.setGroupKick()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupban" class="sidebar-link">bot.setGroupBan()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupanonymousban" class="sidebar-link">bot.setGroupAnonymousBan()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupwholeban" class="sidebar-link">bot.setGroupWholeBan()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupadmin" class="sidebar-link">bot.setGroupAdmin()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupanonymous" class="sidebar-link">bot.setGroupAnonymous()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupcard" class="sidebar-link">bot.setGroupCard()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupleave" class="sidebar-link">bot.setGroupLeave()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupspecialtitle" class="sidebar-link">bot.setGroupSpecialTitle()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-sendgroupnotice" class="sidebar-link">bot.sendGroupNotice()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupname" class="sidebar-link">bot.setGroupName()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/bot.html#处理请求" class="sidebar-link">处理请求</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setfriendaddrequest" class="sidebar-link">bot.setFriendAddRequest()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setgroupaddrequest" class="sidebar-link">bot.setGroupAddRequest()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/bot.html#账号信息" class="sidebar-link">账号信息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getlogininfo" class="sidebar-link">bot.getLoginInfo()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getvipinfo" class="sidebar-link">bot.getVipInfo()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getstrangerinfo" class="sidebar-link">bot.getStrangerInfo()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getfriendlist" class="sidebar-link">bot.getFriendList()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getgrouplist" class="sidebar-link">bot.getGroupList()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getgroupinfo" class="sidebar-link">bot.getGroupInfo()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getgroupmemberinfo" class="sidebar-link">bot.getGroupMemberInfo()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getgroupmemberlist" class="sidebar-link">bot.getGroupMemberList()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getgroupnotice" class="sidebar-link">bot.getGroupNotice()</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/bot.html#其他操作" class="sidebar-link">其他操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getcookies" class="sidebar-link">bot.getCookies()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getcsrftoken" class="sidebar-link">bot.getCsrfToken()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getcredentials" class="sidebar-link">bot.getCredentials()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getrecord" class="sidebar-link">bot.getRecord()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getimage" class="sidebar-link">bot.getImage()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-cansendimage" class="sidebar-link">bot.canSendImage()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-cansendrecord" class="sidebar-link">bot.canSendRecord()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getstatus" class="sidebar-link">bot.getStatus()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-getversioninfo" class="sidebar-link">bot.getVersionInfo()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setrestart" class="sidebar-link">bot.setRestart()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-setrestartplugin" class="sidebar-link">bot.setRestartPlugin()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-cleandatadir" class="sidebar-link">bot.cleanDataDir()</a></li><li class="sidebar-sub-header"><a href="/api/bot.html#bot-cleanpluginlog" class="sidebar-link">bot.cleanPluginLog()</a></li></ul></li></ul></li><li><a href="/api/event.html" class="sidebar-link">接收器 (Receiver)</a></li><li><a href="/api/session.html" class="sidebar-link">会话 (Session)</a></li><li><a href="/api/command.html" class="sidebar-link">指令 (Command)</a></li><li><a href="/api/database.html" class="sidebar-link">数据库 (Database)</a></li><li><a href="/api/global.html" class="sidebar-link">全局 API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他官方包</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/utils.html" class="sidebar-link">其他工具 (Utils)</a></li><li><a href="/api/test-utils.html" class="sidebar-link">测试工具 (Test Utils)</a></li><li><a href="/api/database/memory.html" class="sidebar-link">数据库：memory</a></li><li><a href="/api/database/mysql.html" class="sidebar-link">数据库：MySQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>更新与迁移</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/changelog.html" class="sidebar-link">v2 更新日志</a></li><li><a href="/api/migration.html" class="sidebar-link">从 v1 迁移</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="机器人"><a href="#机器人" class="header-anchor">#</a> 机器人 (Bot)</h1> <p>Bot 相当于 Koishi v1 的 Sender，它封装了一套标准的 <a href="https://cqhttp.cc/docs/4.15/#/API" target="_blank" rel="noopener noreferrer">cqhttp API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。<a href="https://github.com/Mrs4s/go-cqhttp" target="_blank" rel="noopener noreferrer">go-cqhttp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 进一步扩展了一些接口，这些扩展的功能也被 Koishi 实现了。</p> <ul><li>标有 <span class="badge tip" style="vertical-align:baseline;" data-v-15b7b770>async</span> 的 API 可以被 <a href="/guide/message.html#异步调用"><strong>异步调用</strong></a>，异步调用时的返回值均为 <code>Promise&lt;void&gt;</code></li> <li>标有 <span class="badge warn" style="vertical-align:baseline;" data-v-15b7b770>CoolQ</span> 的 API 只能基于 CoolQ 运行（如 cqhttp）</li> <li>标有 <span class="badge warn" style="vertical-align:baseline;" data-v-15b7b770>mirai</span> 的 API 只能基于 mirai 运行（如 go-cqhttp）</li></ul> <h2 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h2> <h3 id="构造选项"><a href="#构造选项" class="header-anchor">#</a> 构造选项</h3> <p>每个 Bot 都会继承你构造 App 时传入的选项，因此下列选项是天生就有的：</p> <ul><li>bot.selfId</li> <li>bot.server</li> <li>bot.token</li></ul> <h3 id="bot-app"><a href="#bot-app" class="header-anchor">#</a> bot.app</h3> <p>当前 Bot 所在的 App 实例。</p> <h3 id="bot-version"><a href="#bot-version" class="header-anchor">#</a> bot.version</h3> <p>当前 Bot 对应的版本信息。参见 <a href="#bot-getversioninfo"><code>VersionInfo</code></a>。</p> <h2 id="消息相关"><a href="#消息相关" class="header-anchor">#</a> 消息相关</h2> <h3 id="bot-sendmsg"><a href="#bot-sendmsg" class="header-anchor">#</a> bot.sendMsg(type, ctxId, message, autoEscape?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>发送消息。</p> <ul><li><strong>type:</strong> <code>'private' | 'group' | 'discuss'</code> 消息类型</li> <li><strong>userId:</strong> <code>number</code> QQ 号 / 群号 / 讨论组号</li> <li><strong>message:</strong> <code>string</code> 要发送的内容</li> <li><strong>autoEsacpe:</strong> <code>boolean</code> 消息内容是否作为纯文本发送（即不解析 CQ 码）</li> <li>返回值: <code>Promise&lt;number&gt;</code> 新信息的 messageId</li></ul> <h3 id="bot-sendprivatemsg"><a href="#bot-sendprivatemsg" class="header-anchor">#</a> bot.sendPrivateMsg(userId, message, autoEscape?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>发送私聊消息。</p> <ul><li><strong>userId:</strong> <code>number</code> 对方 QQ 号</li> <li><strong>message:</strong> <code>string</code> 要发送的内容</li> <li><strong>autoEsacpe:</strong> <code>boolean</code> 消息内容是否作为纯文本发送（即不解析 CQ 码）</li> <li>返回值: <code>Promise&lt;number&gt;</code> 新信息的 messageId</li></ul> <h3 id="bot-sendgroupmsg"><a href="#bot-sendgroupmsg" class="header-anchor">#</a> bot.sendGroupMsg(groupId, message, autoEscape?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>发送群消息。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>message:</strong> <code>string</code> 要发送的内容</li> <li><strong>autoEsacpe:</strong> <code>boolean</code> 消息内容是否作为纯文本发送（即不解析 CQ 码）</li> <li>返回值: <code>Promise&lt;number&gt;</code> 新信息的 messageId</li></ul> <h3 id="bot-sendgroupforwardmsg"><a href="#bot-sendgroupforwardmsg" class="header-anchor">#</a> bot.sendGroupForwardMsg(groupId, nodes) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span><span class="badge warn" style="vertical-align:top;" data-v-15b7b770>mirai</span></h3> <p>发送群批量转发消息。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>nodes:</strong> <code>CQNode[]</code> 消息节点列表</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">CQNode</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  type</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'node'</span>
<span style="color:#F8F8F2;">  data</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">    id</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  } </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">    name</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">    uin</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">    content</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  }</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-deletemsg"><a href="#bot-deletemsg" class="header-anchor">#</a> bot.deleteMsg(messageId) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>撤回信息。</p> <ul><li><strong>messageId:</strong> <code>number</code> 消息 ID</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-sendlike"><a href="#bot-sendlike" class="header-anchor">#</a> bot.sendLike(userId, times?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span><span class="badge warn" style="vertical-align:top;" data-v-15b7b770>CoolQ</span></h3> <p>给好友点赞。</p> <ul><li><strong>userId:</strong> <code>number</code> 好友 QQ 号</li> <li><strong>times:</strong> <code>number</code> 点赞次数</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>本接口仅限<strong>对好友</strong>使用。</p></div> <h3 id="bot-getgroupmsg"><a href="#bot-getgroupmsg" class="header-anchor">#</a> bot.getGroupMsg(messageId) <span class="badge warn" style="vertical-align:top;" data-v-15b7b770>mirai</span></h3> <p>发送群批量转发消息。</p> <ul><li><strong>messageId:</strong> <code>number</code> 消息编号</li> <li>返回值: <code>Promise&lt;GroupMessage&gt;</code></li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">GroupMessage</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  messageId</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  realId</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  sender</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">AccountInfo</span>
<span style="color:#F8F8F2;">  time</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  content</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getforwardmsg"><a href="#bot-getforwardmsg" class="header-anchor">#</a> bot.getForwardMsg(messageId) <span class="badge warn" style="vertical-align:top;" data-v-15b7b770>mirai</span></h3> <p>发送群批量转发消息。</p> <ul><li><strong>messageId:</strong> <code>number</code> 消息编号</li> <li>返回值: <code>Promise&lt;ForwardMessage&gt;</code></li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">ForwardMessage</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  messages</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">    sender</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">AccountInfo</span>
<span style="color:#F8F8F2;">    time</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">    content</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  }[]</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h2 id="群相关"><a href="#群相关" class="header-anchor">#</a> 群相关</h2> <h3 id="bot-setgroupkick"><a href="#bot-setgroupkick" class="header-anchor">#</a> bot.setGroupKick(groupId, userId, rejectAddRequest?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>踢出群聊或拒绝加群。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>userId:</strong> <code>number</code> QQ 号</li> <li><strong>rejectAddRequest:</strong> <code>boolean</code> 拒绝此人的加群请求</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupban"><a href="#bot-setgroupban" class="header-anchor">#</a> bot.setGroupBan(groupId, userId, duration?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>群组单人禁言。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>userId:</strong> <code>number</code> QQ 号</li> <li><strong>duration:</strong> <code>number</code> 禁言时长（秒），设为 0 表示解除禁言</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupanonymousban"><a href="#bot-setgroupanonymousban" class="header-anchor">#</a> bot.setGroupAnonymousBan(groupId, anonymous, duration?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>群组匿名用户禁言。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>anonymous:</strong> <code>object | string</code> 匿名用户的信息或 flag，参见 <a href="/guide/message.html#message-型元数据属性">Message 型元数据属性</a></li> <li><strong>duration:</strong> <code>number</code> 禁言时长（秒），设为 0 表示解除禁言</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupwholeban"><a href="#bot-setgroupwholeban" class="header-anchor">#</a> bot.setGroupWholeBan(groupId, enable?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>群组全员禁言。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>enable:</strong> <code>boolean</code> 是否禁言，默认为 <code>true</code></li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupadmin"><a href="#bot-setgroupadmin" class="header-anchor">#</a> bot.setGroupAdmin(groupId, userId, enable?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>群组设置管理员。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>userId:</strong> <code>number</code> QQ 号</li> <li><strong>enable:</strong> <code>boolean</code> 是否设置为管理员，默认为 <code>true</code></li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupanonymous"><a href="#bot-setgroupanonymous" class="header-anchor">#</a> bot.setGroupAnonymous(groupId, enable?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>群组设置匿名。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>enable:</strong> <code>boolean</code> 是否允许匿名，默认为 <code>true</code></li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupcard"><a href="#bot-setgroupcard" class="header-anchor">#</a> bot.setGroupCard(groupId, userId, card?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>设置群名片。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>userId:</strong> <code>number</code> QQ 号</li> <li><strong>card:</strong> <code>string</code> 群名片</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupleave"><a href="#bot-setgroupleave" class="header-anchor">#</a> bot.setGroupLeave(groupId, isDismiss?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>退出群组。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>isDismiss:</strong> <code>boolean</code> 是否解散群（仅对群主生效）</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupspecialtitle"><a href="#bot-setgroupspecialtitle" class="header-anchor">#</a> bot.setGroupSpecialTitle(groupId, userId, specialTitle?, duration?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>设置群组专属头衔。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>userId:</strong> <code>number</code> QQ 号</li> <li><strong>specialTitle:</strong> <code>string</code> 专属头衔</li> <li><strong>duration:</strong> <code>number</code> 有效时长（秒，目前可能没用）</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-sendgroupnotice"><a href="#bot-sendgroupnotice" class="header-anchor">#</a> bot.sendGroupNotice(groupId, title, content) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>发布群公告。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>title:</strong> <code>string</code> 标题</li> <li><strong>content:</strong> <code>string</code> 内容</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupname"><a href="#bot-setgroupname" class="header-anchor">#</a> bot.setGroupName(groupId, name) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span><span class="badge warn" style="vertical-align:top;" data-v-15b7b770>mirai</span></h3> <p>修改群名称。</p> <ul><li><strong>groupId:</strong> <code>number</code> 群号</li> <li><strong>name:</strong> <code>string</code> 群名称</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h2 id="处理请求"><a href="#处理请求" class="header-anchor">#</a> 处理请求</h2> <h3 id="bot-setfriendaddrequest"><a href="#bot-setfriendaddrequest" class="header-anchor">#</a> bot.setFriendAddRequest(flag, approve?, remark?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>处理加好友请求。</p> <ul><li><strong>flag:</strong> <code>string</code> 加好友请求的 flag（需从上报的数据中获得）</li> <li><strong>approve:</strong> <code>boolean</code> 是否同意请求，默认为 <code>true</code></li> <li><strong>remark:</strong> <code>string</code> 好友备注名（仅当同意时有效）</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-setgroupaddrequest"><a href="#bot-setgroupaddrequest" class="header-anchor">#</a> bot.setGroupAddRequest(flag, subType, approve?, reason?) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>处理加群请求或邀请。</p> <ul><li><strong>flag:</strong> <code>string</code> 加群请求的 flag（需从上报的数据中获得）</li> <li><strong>subType:</strong> <code>'add' | 'invite'</code> 子类型，参见 <a href="/guide/message.html#request-型元数据属性">Request 型元数据属性</a></li> <li><strong>approve:</strong> <code>boolean</code> 是否同意请求，默认为 <code>true</code></li> <li><strong>reason:</strong> <code>string</code> 拒绝理由（仅当拒绝时有效）</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h2 id="账号信息"><a href="#账号信息" class="header-anchor">#</a> 账号信息</h2> <h3 id="bot-getlogininfo"><a href="#bot-getlogininfo" class="header-anchor">#</a> bot.getLoginInfo()</h3> <p>获取登录号信息。</p> <ul><li>返回值: <code>Promise&lt;AccountInfo&gt;</code> 登录号信息</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">AccountInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  userId</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  nickname</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getvipinfo"><a href="#bot-getvipinfo" class="header-anchor">#</a> bot.getVipInfo()</h3> <p>获取会员信息。</p> <ul><li>返回值: <code>Promise&lt;VipInfo&gt;</code> 会员信息</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">VipInfo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">extends</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">AccountInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  level</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  levelSpeed</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  vipLevel</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  vipGrowthSpeed</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  vipGrowthTotal</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getstrangerinfo"><a href="#bot-getstrangerinfo" class="header-anchor">#</a> bot.getStrangerInfo(userId, noCache?)</h3> <p>获取陌生人信息。</p> <ul><li><strong>userId:</strong> <code>number</code> 目标 QQ 号</li> <li><strong>noCache:</strong> <code>boolean</code> 是否不使用缓存，默认为 <code>false</code></li> <li>返回值: <code>Promise&lt;StrangerInfo&gt;</code> 陌生人信息</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">StrangerInfo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">extends</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">AccountInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  sex</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'male'</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'female'</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'unknown'</span>
<span style="color:#F8F8F2;">  age</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getfriendlist"><a href="#bot-getfriendlist" class="header-anchor">#</a> bot.getFriendList()</h3> <p>获取好友列表。</p> <ul><li>返回值: <code>Promise&lt;FriendInfo[]&gt;</code> 好友列表</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">FriendInfo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">extends</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">AccountInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  remark</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getgrouplist"><a href="#bot-getgrouplist" class="header-anchor">#</a> bot.getGroupList()</h3> <p>获取群列表。</p> <ul><li>返回值: <code>Promise&lt;ListedGroupInfo[]&gt;</code> 群信息列表</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">ListedGroupInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  groupId</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  groupName</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getgroupinfo"><a href="#bot-getgroupinfo" class="header-anchor">#</a> bot.getGroupInfo(groupId, noCache?)</h3> <p>获取群信息。</p> <ul><li><strong>groupId:</strong> <code>number</code> 目标群号</li> <li><strong>noCache:</strong> <code>boolean</code> 是否不使用缓存，默认为 <code>false</code></li> <li>返回值: <code>Promise&lt;GroupInfo&gt;</code> 群信息</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">GroupInfo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">extends</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">ListedGroupInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  memberCount</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  maxMemberCount</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getgroupmemberinfo"><a href="#bot-getgroupmemberinfo" class="header-anchor">#</a> bot.getGroupMemberInfo(groupId, userId, noCache?)</h3> <p>获取群成员信息。</p> <ul><li><strong>groupId:</strong> <code>number</code> 目标群号</li> <li><strong>userId:</strong> <code>number</code> 目标 QQ 号</li> <li><strong>noCache:</strong> <code>boolean</code> 是否不使用缓存，默认为 <code>false</code></li> <li>返回值: <code>Promise&lt;GroupMemberInfo&gt;</code> 群成员信息</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">SenderInfo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">extends</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">StrangerInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  area</span><span style="color:#F92672;">?:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  card</span><span style="color:#F92672;">?:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  level</span><span style="color:#F92672;">?:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  role</span><span style="color:#F92672;">?:</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'owner'</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'admin'</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'member'</span>
<span style="color:#F8F8F2;">  title</span><span style="color:#F92672;">?:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span>

<span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">GroupMemberInfo</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">extends</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">SenderInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  cardChangeable</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">  groupId</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  joinTime</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  lastSentTime</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  titleExpireTime</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  unfriendly</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getgroupmemberlist"><a href="#bot-getgroupmemberlist" class="header-anchor">#</a> bot.getGroupMemberList(groupId)</h3> <p>获取群成员列表。</p> <ul><li><strong>groupId:</strong> <code>number</code> 目标群号</li> <li>返回值: <code>Promise&lt;GroupMemberInfo[]&gt;</code> 群成员列表</li></ul> <h3 id="bot-getgroupnotice"><a href="#bot-getgroupnotice" class="header-anchor">#</a> bot.getGroupNotice(groupId)</h3> <p>获取群公告列表。部分字段具体含义可能需要自行理解。</p> <ul><li><strong>groupId:</strong> <code>number</code> 目标群号</li> <li>返回值: <code>Promise&lt;GroupNoticeInfo[]&gt;</code> 群公告列表</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">GroupNoticeInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  cn</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  fid</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  fn</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  msg</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">    text</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">    textFace</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">    title</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  }</span>
<span style="color:#F8F8F2;">  pubt</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  readNum</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  settings</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">    isShowEditCard</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">    remindTs</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  }</span>
<span style="color:#F8F8F2;">  u</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  vn</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h2 id="其他操作"><a href="#其他操作" class="header-anchor">#</a> 其他操作</h2> <h3 id="bot-getcookies"><a href="#bot-getcookies" class="header-anchor">#</a> bot.getCookies(domain?)</h3> <p>获取 Cookies。</p> <ul><li><strong>domain:</strong> <code>string</code> 需要获取 cookies 的域名</li> <li>返回值: <code>Promise&lt;string&gt;</code> cookies</li></ul> <h3 id="bot-getcsrftoken"><a href="#bot-getcsrftoken" class="header-anchor">#</a> bot.getCsrfToken()</h3> <p>获取 CSRF Token。</p> <ul><li>返回值: <code>Promise&lt;string&gt;</code> CSRF Token</li></ul> <h3 id="bot-getcredentials"><a href="#bot-getcredentials" class="header-anchor">#</a> bot.getCredentials()</h3> <p>获取 QQ 相关接口凭证，相当于上面两个接口的合并。</p> <ul><li><strong>domain:</strong> <code>string</code> 需要获取 cookies 的域名</li> <li>返回值: <code>Promise&lt;Credentials&gt;</code> 接口凭证</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">Credentials</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  cookies</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  csrfToken</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getrecord"><a href="#bot-getrecord" class="header-anchor">#</a> bot.getRecord(file, outFormat, fullPath?)</h3> <p>获取语音：并不是真的获取语音，而是转换语音到指定的格式，然后返回 <code>data/record</code> 目录下的语音文件名。注意，要使用此接口，需要安装 CoolQ 的 <a href="https://cqp.cc/t/21132" target="_blank" rel="noopener noreferrer">语音组件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <ul><li><strong>file:</strong> <code>string</code> 语音文件名</li> <li><strong>outFormat:</strong> <code>'mp3' | 'amr' | 'wma' | 'm4a' | 'spx' | 'ogg' | 'wav' | 'flac'</code></li> <li><strong>fullPath:</strong> <code>boolean</code> 是否返回文件的绝对路径</li> <li>返回值: <code>Promise&lt;RecordInfo&gt;</code></li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">RecordInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  file</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getimage"><a href="#bot-getimage" class="header-anchor">#</a> bot.getImage(file)</h3> <p>获取图片：与上面类似，不过返回 <code>data/image</code> 目录下的图片路径。</p> <ul><li><strong>file:</strong> <code>string</code> 图片文件名</li> <li>返回值: <code>Promise&lt;ImageInfo&gt;</code></li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">ImageInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  file</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>

<span style="color:#F8F8F2;">  </span><span style="color:#75715E;">// go-cqhttp 特有</span>
<span style="color:#F8F8F2;">  size</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  filename</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  url</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-cansendimage"><a href="#bot-cansendimage" class="header-anchor">#</a> bot.canSendImage()</h3> <p>检查是否可以发送图片。</p> <ul><li>返回值: <code>Promise&lt;boolean&gt;</code> 是否可以发送图片</li></ul> <h3 id="bot-cansendrecord"><a href="#bot-cansendrecord" class="header-anchor">#</a> bot.canSendRecord()</h3> <p>检查是否可以发送语音。</p> <ul><li>返回值: <code>Promise&lt;boolean&gt;</code> 是否可以发送语音</li></ul> <h3 id="bot-getstatus"><a href="#bot-getstatus" class="header-anchor">#</a> bot.getStatus()</h3> <p>获取插件运行状态。</p> <ul><li>返回值: <code>Promise&lt;StatusInfo&gt;</code> 插件运行状态</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">StatusInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  appInitialized</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">  appEnabled</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">  pluginsGood</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">  appGood</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">  online</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">  good</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-getversioninfo"><a href="#bot-getversioninfo" class="header-anchor">#</a> bot.getVersionInfo()</h3> <p>获取 CoolQ 及 CQHTTP 插件的版本信息。</p> <ul><li>返回值: <code>Promise&lt;VersionInfo&gt;</code> 插件版本信息</li></ul> <div class="panel-view code mini"><div class="controls"><div class="circle red"></div> <div class="circle yellow"></div> <div class="circle green"></div> <div class="title"></div></div> <div class="content"><pre class="shiki" style="background-color:#272822;"><code><span style="color:#F92672;">export</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">interface</span><span style="color:#F8F8F2;"> </span><span style="color:#A6E22E;">VersionInfo</span><span style="color:#F8F8F2;"> {</span>
<span style="color:#F8F8F2;">  coolqDirectory</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  coolqEdition</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'air'</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'pro'</span>
<span style="color:#F8F8F2;">  pluginVersion</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  pluginBuildNumber</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">number</span>
<span style="color:#F8F8F2;">  pluginBuildConfiguration</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'debug'</span><span style="color:#F8F8F2;"> </span><span style="color:#F92672;">|</span><span style="color:#F8F8F2;"> </span><span style="color:#E6DB74;">'release'</span>

<span style="color:#F8F8F2;">  </span><span style="color:#75715E;">// go-cqhttp 特有</span>
<span style="color:#F8F8F2;">  goCqhttp</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">boolean</span>
<span style="color:#F8F8F2;">  runtimeVersion</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">  runtimeOs</span><span style="color:#F92672;">:</span><span style="color:#F8F8F2;"> </span><span style="color:#66D9EF;">string</span>
<span style="color:#F8F8F2;">}</span></code></pre></div></div><h3 id="bot-setrestart"><a href="#bot-setrestart" class="header-anchor">#</a> bot.setRestart(cleanLog?, cleanCache?, cleanEvent?)</h3> <p>重启 CoolQ，并以当前登录号自动登录（需勾选快速登录）。</p> <ul><li><strong>cleanLog:</strong> <code>boolean</code> 是否在重启时清空 CoolQ 的日志数据库（log*.db）</li> <li><strong>cleanCache:</strong> <code>boolean</code> 是否在重启时清空 CoolQ 的缓存数据库（cache.db）</li> <li><strong>cleanEvent:</strong> <code>boolean</code> 是否在重启时清空 CoolQ 的事件数据库（eventv2.db）</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <div class="custom-block warning"><p class="custom-block-title">警告</p> <p>由于强行退出可能导致 CoolQ 数据库损坏而影响功能，此接口除非必要请尽量避免使用。</p></div> <h3 id="bot-setrestartplugin"><a href="#bot-setrestartplugin" class="header-anchor">#</a> bot.setRestartPlugin(delay?)</h3> <p>重启 HTTP API 插件。</p> <ul><li><strong>delay:</strong> <code>string</code> 要延迟的毫秒数，如果默认情况下无法重启，可以尝试设置延迟为 2000 左右</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-cleandatadir"><a href="#bot-cleandatadir" class="header-anchor">#</a> bot.cleanDataDir(dataDir) <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>清理积攒了太多旧文件的数据目录。</p> <ul><li><strong>dataDir:</strong> <code>'image' | 'record' | 'show' | 'bface'</code> 要清理的目录名</li> <li>返回值: <code>Promise&lt;void&gt;</code></li></ul> <h3 id="bot-cleanpluginlog"><a href="#bot-cleanpluginlog" class="header-anchor">#</a> bot.cleanPluginLog() <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>async</span></h3> <p>清空插件的日志文件。</p> <ul><li>返回值: <code>Promise&lt;void&gt;</code></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/koishijs/koishijs.github.io/edit/docs/api/bot.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/4/2020, 8:11:09 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/app.html" class="prev">
        应用 (App)
      </a></span> <span class="next"><a href="/api/event.html">
        接收器 (Receiver)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.70e70a81.js" defer></script><script src="/assets/js/2.a5c80c03.js" defer></script><script src="/assets/js/7.5c9776f1.js" defer></script><script src="/assets/js/11.82d92c92.js" defer></script><script src="/assets/js/6.92d33830.js" defer></script><script src="/assets/js/5.e097d7d7.js" defer></script>
  </body>
</html>
