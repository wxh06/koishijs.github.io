(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{399:function(t,a,e){"use strict";e.r(a);var s=e(25),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"全局-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#全局-api"}},[t._v("#")]),t._v(" 全局 API")]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),e("p",[t._v("这里是"),e("strong",[t._v("正在施工")]),t._v("的 koishi v2 的文档。要查看 v1 版本的文档，请前往"),e("a",{attrs:{href:"https://koishijs.github.io/v1/",target:"_blank",rel:"noopener noreferrer"}},[e("strong",[t._v("这里")]),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("本章节收录了由包 koishi-core 导出的主要 API。")]),t._v(" "),e("h2",{attrs:{id:"command-静态方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-静态方法"}},[t._v("#")]),t._v(" Command 静态方法")]),t._v(" "),e("p",[t._v("这里包含了 "),e("RouterLink",{attrs:{to:"/api/command.html"}},[t._v("Command")]),t._v(" 类的静态方法。")],1),t._v(" "),e("h3",{attrs:{id:"command-attachuserfields"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-attachuserfields"}},[t._v("#")]),t._v(" Command.attachUserFields(fields, argv)")]),t._v(" "),e("p",[t._v("按照 argv 中的 command 属性向 fields 添加所需的用户字段。它是一个内置的 before-user 监听器。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("fields:")]),t._v(" "),e("code",[t._v("Set<UserField>")]),t._v(" 用户字段集合")]),t._v(" "),e("li",[e("strong",[t._v("argv:")]),t._v(" "),e("RouterLink",{attrs:{to:"/guide/command-system.html#parsedcommandline-对象"}},[e("code",[t._v("ParsedCommandLine")])]),t._v(" 只需确保其中存在 command 属性即可")],1),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("void")])])]),t._v(" "),e("h3",{attrs:{id:"command-attachgroupfields"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-attachgroupfields"}},[t._v("#")]),t._v(" Command.attachGroupFields(fields, argv)")]),t._v(" "),e("p",[t._v("按照 argv 中的 command 属性向 fields 添加所需的群字段。它是一个内置的 before-group 监听器。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("fields:")]),t._v(" "),e("code",[t._v("Set<GroupField>")]),t._v(" 群字段集合")]),t._v(" "),e("li",[e("strong",[t._v("argv:")]),t._v(" "),e("RouterLink",{attrs:{to:"/guide/command-system.html#parsedcommandline-对象"}},[e("code",[t._v("ParsedCommandLine")])]),t._v(" 只需确保其中存在 command 属性即可")],1),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("void")])])]),t._v(" "),e("h2",{attrs:{id:"运行时工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行时工具"}},[t._v("#")]),t._v(" 运行时工具")]),t._v(" "),e("p",[t._v("这里包含了一些运行时的工具。")]),t._v(" "),e("h3",{attrs:{id:"gettargetid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gettargetid"}},[t._v("#")]),t._v(" getTargetId(target)")]),t._v(" "),e("p",[t._v("获得目标用户 QQ 号。传入一个字符串，可能是 QQ 号本身或是 @ 群内成员。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("target:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 要解析的字符串")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("number")]),t._v(" 目标 QQ 号")])]),t._v(" "),e("h3",{attrs:{id:"getusage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getusage"}},[t._v("#")]),t._v(" getUsage(name, user) "),e("Badge",{attrs:{text:"beta",type:"warn"}}),t._v(" "),e("Badge",{attrs:{text:"1.6.0+",type:"warn"}})],1),t._v(" "),e("p",[t._v("获得用户的使用数据（如果不存在则会创建）。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("name:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 标识符（如果是指令的话就是指令名）")]),t._v(" "),e("li",[e("strong",[t._v("user:")]),t._v(" "),e("code",[t._v("UserData")]),t._v(" 用户数据")]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("Usage")])])]),t._v(" "),e("panel-view",{staticClass:"code",attrs:{title:""}},[e("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[e("code",[e("span",{staticStyle:{color:"#F92672"}},[t._v("export")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("interface")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#A6E22E"}},[t._v("Usage")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" {")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ")]),e("span",{staticStyle:{color:"#75715E"}},[t._v("// 最后一次调用的时间戳")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  last")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("?:")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("number")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ")]),e("span",{staticStyle:{color:"#75715E"}},[t._v("// 当日已经调用的次数")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  count")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("?:")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("number")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("}")])])])]),e("h3",{attrs:{id:"updateusage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updateusage"}},[t._v("#")]),t._v(" updateUsage(name, user, maxUsage?, minInterval?) "),e("Badge",{attrs:{text:"beta",type:"warn"}}),t._v(" "),e("Badge",{attrs:{text:"1.6.0+",type:"warn"}})],1),t._v(" "),e("p",[t._v("更新用户的使用数据（如果不存在则会创建）。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("name:")]),t._v(" "),e("code",[t._v("string")]),t._v(" 标识符（如果是指令的话就是指令名）")]),t._v(" "),e("li",[e("strong",[t._v("user:")]),t._v(" "),e("code",[t._v("UserData")]),t._v(" 用户数据")]),t._v(" "),e("li",[e("strong",[t._v("maxUsage:")]),t._v(" "),e("code",[t._v("number")]),t._v(" 每天最大调用次数，默认为 "),e("code",[t._v("Infinity")])]),t._v(" "),e("li",[e("strong",[t._v("minInterval:")]),t._v(" "),e("code",[t._v("number")]),t._v(" 调用最小时间间隔，默认为 "),e("code",[t._v("0")])]),t._v(" "),e("li",[t._v("返回值: "),e("code",[t._v("string")]),t._v(" 如果无法调用则返回错误信息，如果可以调用则没有返回值")])])],1)}),[],!1,null,null,null);a.default=v.exports}}]);