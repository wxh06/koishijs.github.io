(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{398:function(t,s,a){"use strict";a.r(s);var l=a(25),o=Object(l.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"koishi-database-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#koishi-database-mysql"}},[t._v("#")]),t._v(" koishi-database-mysql")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("本页显示的版本号都表示对应的 koishi-database-mysql 版本号（而不是对应的 koishi 版本号）。")]),t._v(" "),a("p",[t._v("所有功能实现均对应于 MySQL v5.7。")])]),t._v(" "),a("h2",{attrs:{id:"db-mysql-joinkeys"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#db-mysql-joinkeys"}},[t._v("#")]),t._v(" db.mysql.joinKeys(keys?)")]),t._v(" "),a("p",[t._v("连接字段成字符串。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("keys:")]),t._v(" "),a("code",[t._v("string[]")]),t._v(" 要连接的字段")]),t._v(" "),a("li",[t._v("返回值: "),a("code",[t._v("string")]),t._v(" 连接后的结果")])]),t._v(" "),a("h2",{attrs:{id:"db-mysql-query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#db-mysql-query"}},[t._v("#")]),t._v(" db.mysql.query(sql, values?)")]),t._v(" "),a("p",[t._v("发送 SQL 请求。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("sql:")]),t._v(" "),a("code",[t._v("string")]),t._v(" SQL 字符串")]),t._v(" "),a("li",[a("strong",[t._v("value:")]),t._v(" "),a("code",[t._v("any")]),t._v(" 要插入的值")]),t._v(" "),a("li",[t._v("返回值: "),a("code",[t._v("Promise<any>")]),t._v(" 请求结果")])]),t._v(" "),a("h2",{attrs:{id:"db-mysql-select"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#db-mysql-select"}},[t._v("#")]),t._v(" db.mysql.select(table, fields?, conditional?, values?)")]),t._v(" "),a("p",[t._v("搜索表中的数据。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("table:")]),t._v(" "),a("code",[t._v("string")]),t._v(" 表名")]),t._v(" "),a("li",[a("strong",[t._v("fields:")]),t._v(" "),a("code",[t._v("string[]")]),t._v(" 字段列表")]),t._v(" "),a("li",[a("strong",[t._v("conditional:")]),t._v(" "),a("code",[t._v("string")]),t._v(" SQL 条件语句")]),t._v(" "),a("li",[a("strong",[t._v("values:")]),t._v(" "),a("code",[t._v("any")]),t._v(" 要插入的值")]),t._v(" "),a("li",[t._v("返回值: "),a("code",[t._v("Promise<any>")])])]),t._v(" "),a("h2",{attrs:{id:"db-mysql-update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#db-mysql-update"}},[t._v("#")]),t._v(" db.mysql.update(table, id, data)")]),t._v(" "),a("p",[t._v("更新表中的某行。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("table:")]),t._v(" "),a("code",[t._v("string")]),t._v(" 表名")]),t._v(" "),a("li",[a("strong",[t._v("id:")]),t._v(" "),a("code",[t._v("number")]),t._v(" 行号")]),t._v(" "),a("li",[a("strong",[t._v("data:")]),t._v(" "),a("code",[t._v("any")]),t._v(" 要更新的数据")]),t._v(" "),a("li",[t._v("返回值: "),a("code",[t._v("Promise<any>")])])]),t._v(" "),a("h2",{attrs:{id:"db-mysql-count"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#db-mysql-count"}},[t._v("#")]),t._v(" db.mysql.count(table)")]),t._v(" "),a("p",[t._v("计算表中的行数。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("table:")]),t._v(" "),a("code",[t._v("string")]),t._v(" 表名")]),t._v(" "),a("li",[t._v("返回值: "),a("code",[t._v("Promise<number>")]),t._v(" 表中的行数")])]),t._v(" "),a("h2",{attrs:{id:"供参考的-mysql-初始化代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#供参考的-mysql-初始化代码"}},[t._v("#")]),t._v(" 供参考的 MySQL 初始化代码")]),t._v(" "),a("panel-view",{staticClass:"code",attrs:{title:""}},[a("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[a("code",[a("span",{staticStyle:{color:"#F92672"}},[t._v("CREATE")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("TABLE")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" `")]),a("span",{staticStyle:{color:"#A6E22E"}},[t._v("user")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("` (")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`id`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("BIGINT")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("20")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") UNSIGNED ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("NOT NULL")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("PRIMARY KEY")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" (")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`id`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") USING BTREE,")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`flag`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("INT")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("11")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("NOT NULL")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" DEFAULT ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("'0'")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`authority`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("TINYINT")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("3")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") UNSIGNED ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("NOT NULL")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" DEFAULT ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("'0'")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`usage`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" JSON ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("NOT NULL")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(");")]),t._v("\n\n"),a("span",{staticStyle:{color:"#F92672"}},[t._v("CREATE")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("TABLE")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" `")]),a("span",{staticStyle:{color:"#A6E22E"}},[t._v("group")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("` (")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`id`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("BIGINT")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("20")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") UNSIGNED ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("NOT NULL")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("PRIMARY KEY")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" (")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`id`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") USING BTREE,")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`flag`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("TINYINT")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("4")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") UNSIGNED ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("NOT NULL")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" DEFAULT ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("'0'")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("`assignee`")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),a("span",{staticStyle:{color:"#66D9EF"}},[t._v("BIGINT")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),a("span",{staticStyle:{color:"#AE81FF"}},[t._v("20")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(") UNSIGNED ")]),a("span",{staticStyle:{color:"#F92672"}},[t._v("NOT NULL")]),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" DEFAULT ")]),a("span",{staticStyle:{color:"#E6DB74"}},[t._v("'0'")]),t._v("\n"),a("span",{staticStyle:{color:"#F8F8F2"}},[t._v(");")])])])])],1)}),[],!1,null,null,null);s.default=o.exports}}]);