(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{401:function(t,a,s){"use strict";s.r(a);var o=s(25),c=Object(o.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"从-v1-迁移"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从-v1-迁移"}},[t._v("#")]),t._v(" 从 v1 迁移")]),t._v(" "),s("p",[t._v("这个页面将包含全部 v1 中修改或删除的 API。")]),t._v(" "),s("h2",{attrs:{id:"钩子函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#钩子函数"}},[t._v("#")]),t._v(" 钩子函数")]),t._v(" "),s("p",[t._v("Koishi v1 的 "),s("code",[t._v("ctx.receiver")]),t._v(" 使用了 EventEmitter 来分发事件，而 Koishi v2 则自己实现了一个事件系统。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.receiver.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("on")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(event, callback)    ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("on")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(event, callback)")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.receiver.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("emit")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(event, ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("args)   ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("emit")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(event, ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("args)")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("emitEvent")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("args)          ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("emit")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("args)")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.options.maxMiddlewares          ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  app.options.maxListeners")])])])]),s("p",[t._v("除此以外，Koishi v2 还加入了更多与事件有关的 API：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("emit")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()      ")]),s("span",{staticStyle:{color:"#75715E"}},[t._v("// 同时触发，返回 void")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("bail")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()      ")]),s("span",{staticStyle:{color:"#75715E"}},[t._v("// 依次触发，返回第一个 truthy 的结果")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("parallel")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()  ")]),s("span",{staticStyle:{color:"#75715E"}},[t._v("// 同时触发，返回一个全部完成的 Promise")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("serial")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()    ")]),s("span",{staticStyle:{color:"#75715E"}},[t._v("// 依次触发，返回第一个 resolve truthy 的结果")])])])]),s("h2",{attrs:{id:"过滤器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#过滤器"}},[t._v("#")]),t._v(" 过滤器")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.groups                      ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("group")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("intersect")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(ctx.app.groups)   ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("group")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")])])])]),s("h2",{attrs:{id:"单一应用实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单一应用实例"}},[t._v("#")]),t._v(" 单一应用实例")]),t._v(" "),s("p",[t._v("Koishi v2 使用单一的 App 实例管理多个机器人账号。因此，如果你使用多个机器人来进行负载均衡，请留意这方面的 API 变化。")]),t._v(" "),s("h3",{attrs:{id:"new-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-app"}},[t._v("#")]),t._v(" new App() "),s("Badge",{attrs:{type:"warn",text:"修改"}})],1),t._v(" "),s("p",[t._v("请不必担心，如果你只使用一个账号，这里无需做出任何更改。只要不提供 "),s("code",[t._v("bots")]),t._v(" 选项，Koishi 就会将传入 App 的参数作为唯一一个账号的配置。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#75715E"}},[t._v("// before")]),t._v("\n"),s("span",{staticStyle:{color:"#F92672"}},[t._v("new")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("App")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("({ selfId: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("100")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", server: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'http://localhost:5700'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", token: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'token1'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("otherOptions })")]),t._v("\n"),s("span",{staticStyle:{color:"#F92672"}},[t._v("new")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("App")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("({ selfId: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("200")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", server: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'http://localhost:5800'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", token: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'token2'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("otherOptions })")]),t._v("\n\n"),s("span",{staticStyle:{color:"#75715E"}},[t._v("// after")]),t._v("\n"),s("span",{staticStyle:{color:"#F92672"}},[t._v("new")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("App")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("({")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  bots: [")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    { selfId: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("100")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", server: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'http://localhost:5700'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", token: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'token1'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" },")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    { selfId: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("200")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", server: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'http://localhost:5800'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", token: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'token2'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" },")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ],")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ")]),s("span",{staticStyle:{color:"#F92672"}},[t._v("...")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("otherOptions,")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("})")])])])]),s("h3",{attrs:{id:"applist-appmap-ctx-sender"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#applist-appmap-ctx-sender"}},[t._v("#")]),t._v(" appList, appMap, ctx.sender "),s("Badge",{attrs:{type:"error",text:"移除"}})],1),t._v(" "),s("p",[t._v("现在可以通过 "),s("code",[t._v("ctx.bots")]),t._v(" 访问当前 App 下的所有机器人，也可以用 "),s("code",[t._v("session.$app")]),t._v(" 和 "),s("code",[t._v("session.$bot")]),t._v(" 访问当前会话所在的 App 和 Bot 实例了。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("appMap[selfId].sender   ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.bots[selfId]")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("appList.")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("forEach")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(cb)     ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.bots.")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("forEach")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(cb)")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.sender.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("sendMsg")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()    ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.bots[selfId].")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("sendMsg")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")]),t._v("\n\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("appMap[selfId]          ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  session.$app")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("appMap[selfId].sender   ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  session.$bot")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.sender.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("sendMsg")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()    ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  session.$bot.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("sendMsg")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")])])])]),s("h3",{attrs:{id:"startall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#startall"}},[t._v("#")]),t._v(" startAll(), stopAll(), onStart(), onStop() "),s("Badge",{attrs:{type:"error",text:"移除"}})],1),t._v(" "),s("p",[t._v("出于上述理由，我们也不需要全局的生命周期方法了。直接使用 v1 就有的生命周期方法即可控制所有 Bot 实例。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#A6E22E"}},[t._v("startAll")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()              ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("start")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")]),t._v("\n"),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("stopAll")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()               ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  app.")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("stop")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")]),t._v("\n\n"),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("onStart")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(cb)             ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("on")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'connect'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", cb)")]),t._v("\n"),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("onStop")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(cb)              ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("on")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'disconnect'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", cb)")])])])]),s("h3",{attrs:{id:"app-selfid-getselfids"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#app-selfid-getselfids"}},[t._v("#")]),t._v(" app.selfId, getSelfIds() "),s("Badge",{attrs:{type:"warn",text:"移除"}})],1),t._v(" "),s("p",[t._v("与机器人账号相关的 API 也相应做出了调整。")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("app.selfId              ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  bot.selfId")]),t._v("\n"),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("getSelfIds")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()            ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("getSelfIds")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")])])])]),s("h2",{attrs:{id:"指令操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令操作"}},[t._v("#")]),t._v(" 指令操作")]),t._v(" "),s("h3",{attrs:{id:"cmd-option"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cmd-option"}},[t._v("#")]),t._v(" cmd.option() "),s("Badge",{attrs:{type:"warn",text:"修改"}})],1),t._v(" "),s("p",[t._v("为了对注册的选项进行自动的代码补全，我们修改了 option 方法的行为：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#75715E"}},[t._v("// old")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("cmd.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-f, --foo <arg>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'description'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { default: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("123")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("cmd.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-B, --no-bar'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'description'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(")")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("cmd.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'--baz <arg>'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'description'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { isString: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("true")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")]),t._v("\n\n"),s("span",{staticStyle:{color:"#75715E"}},[t._v("// new")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("cmd.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'foo'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-f <arg> description'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { fallback: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("123")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("cmd.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'bar'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'-B description'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { value: ")]),s("span",{staticStyle:{color:"#AE81FF"}},[t._v("false")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("cmd.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("option")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("(")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'baz'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'<arg> description'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", { type: ")]),s("span",{staticStyle:{color:"#E6DB74"}},[t._v("'string'")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" })")])])])]),s("h3",{attrs:{id:"app-parsecommandline"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#app-parsecommandline"}},[t._v("#")]),t._v(" app.parseCommandLine(), app.executeCommandLine(), ctx.runCommand() "),s("Badge",{attrs:{type:"error",text:"移除"}})],1),t._v(" "),s("p",[t._v("我们设计了更强大和便捷的替代品：")]),t._v(" "),s("panel-view",{staticClass:"code",attrs:{title:""}},[s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[s("code",[s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("parseCommandLine")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()    ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("parse")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.app.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("executeCommandLine")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()  ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("execute")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")]),t._v("\n"),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("runCommand")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()              ")]),s("span",{staticStyle:{color:"#66D9EF"}},[t._v("=>")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ctx.")]),s("span",{staticStyle:{color:"#A6E22E"}},[t._v("execute")]),s("span",{staticStyle:{color:"#F8F8F2"}},[t._v("()")])])])]),s("h2",{attrs:{id:"数据库相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库相关"}},[t._v("#")]),t._v(" 数据库相关")]),t._v(" "),s("h3",{attrs:{id:"registerdatabase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#registerdatabase"}},[t._v("#")]),t._v(" registerDatabase(name, subdatabase) "),s("Badge",{attrs:{type:"error",text:"移除"}})],1),t._v(" "),s("h3",{attrs:{id:"injectmethods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#injectmethods"}},[t._v("#")]),t._v(" injectMethods(name, methods, config?) "),s("Badge",{attrs:{type:"error",text:"移除"}})],1),t._v(" "),s("h2",{attrs:{id:"其他变更"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他变更"}},[t._v("#")]),t._v(" 其他变更")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("CQCode.parseAll()")]),t._v(" 将不在封装纯文本，返回 "),s("code",[t._v("string | CQCode[]")])])])],1)}),[],!1,null,null,null);a.default=c.exports}}]);