(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{383:function(t,s,e){"use strict";e.r(s);var i=e(25),a=Object(i.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"接入-github-webhook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#接入-github-webhook"}},[t._v("#")]),t._v(" 接入 GitHub Webhook "),e("Badge",{attrs:{text:"beta",type:"warn"}})],1),t._v(" "),e("p",[t._v("koishi-plugin-github-webhook 支持接收 "),e("a",{attrs:{href:"https://developer.github.com/webhooks/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Webhook"),e("OutboundLink")],1),t._v(" 并转发到 QQ。")]),t._v(" "),e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),e("p",[t._v("这个插件的配置分为两部分。首先你需要在配置文件或传入 App 的选项中加一个 "),e("code",[t._v("githubWebhook")]),t._v(" 属性，它用来控制服务器信息；而插件的选项则表示接收哪些仓库的 webhook 并转发到哪些群。下面是一个例子：")]),t._v(" "),e("panel-view",{staticClass:"code",attrs:{title:"koishi.config.js"}},[e("pre",{staticClass:"shiki",staticStyle:{"background-color":"#272822"}},[e("code",[e("span",{staticStyle:{color:"#66D9EF"}},[t._v("module")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(".")]),e("span",{staticStyle:{color:"#66D9EF"}},[t._v("exports")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" ")]),e("span",{staticStyle:{color:"#F92672"}},[t._v("=")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(" {")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  ")]),e("span",{staticStyle:{color:"#75715E"}},[t._v("// 这里是默认值，secret 不能留空，否则 @octokit/webhooks 会报错")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  githubWebhook: {")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    path: ")]),e("span",{staticStyle:{color:"#E6DB74"}},[t._v("'/'")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    port: ")]),e("span",{staticStyle:{color:"#AE81FF"}},[t._v("12140")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    secret: ")]),e("span",{staticStyle:{color:"#E6DB74"}},[t._v("''")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(",")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  },")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  plugins: [[")]),e("span",{staticStyle:{color:"#E6DB74"}},[t._v("'github-webhook'")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", {")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),e("span",{staticStyle:{color:"#75715E"}},[t._v("// 当检测到 user/repo1 发生的事件时转发到 123，456 两个群")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("    ")]),e("span",{staticStyle:{color:"#E6DB74"}},[t._v("'user/repo1'")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(": [")]),e("span",{staticStyle:{color:"#AE81FF"}},[t._v("123")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v(", ")]),e("span",{staticStyle:{color:"#AE81FF"}},[t._v("456")]),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("],")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("  }]],")]),t._v("\n"),e("span",{staticStyle:{color:"#F8F8F2"}},[t._v("}")])])])]),e("h2",{attrs:{id:"示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),e("p",[t._v("这一节展示了目前本插件支持的事件。全部取自真正触发在 koishijs/koishi 仓库的事件。")]),t._v(" "),e("h3",{attrs:{id:"push"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#push"}},[t._v("#")]),t._v(" Push")]),t._v(" "),e("h4",{attrs:{id:"normal-push"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#normal-push"}},[t._v("#")]),t._v(" Normal Push")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Push ("),e("em",[t._v("koishijs/koishi")]),t._v(")")]),t._v(" "),e("p",[t._v("Ref: "),e("em",[t._v("refs/heads/develop")])]),t._v(" "),e("p",[t._v("User: "),e("em",[t._v("Shigma")])]),t._v(" "),e("p",[t._v("Compare: "),e("em",[t._v("https://github.com/koishijs/koishi/compare/976c6e8f09a4...3ae7e7044d06")])]),t._v(" "),e("p",[e("em",[t._v("chore: adjust")])]),t._v(" "),e("p",[e("em",[t._v("fix(core): create major context at demand")])])])],1),t._v(" "),e("h4",{attrs:{id:"release-tag"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#release-tag"}},[t._v("#")]),t._v(" Release Tag")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] "),e("em",[t._v("koishijs/koishi")]),t._v(" published tag "),e("em",[t._v("1.5.0")])])])],1),t._v(" "),e("h4",{attrs:{id:"commit-comment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commit-comment"}},[t._v("#")]),t._v(" Commit Comment")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Commit Comment ("),e("em",[t._v("koishijs/koishi")]),t._v(")")]),t._v(" "),e("p",[t._v("User: "),e("em",[t._v("Shigma")])]),t._v(" "),e("p",[t._v("URL: "),e("em",[t._v("https://github.com/koishijs/koishi/commit/bff469eabe14d42683a4f7c3ccb659daec5e1c00#commitcomment-36878220")])]),t._v(" "),e("p",[e("em",[t._v("This will introduce a failure in test.")])])])],1),t._v(" "),e("h3",{attrs:{id:"issue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#issue"}},[t._v("#")]),t._v(" Issue")]),t._v(" "),e("h4",{attrs:{id:"issue-open"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#issue-open"}},[t._v("#")]),t._v(" Issue Open")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Issue Opened ("),e("em",[t._v("koishijs/koishi#19")]),t._v(")")]),t._v(" "),e("p",[t._v("Title: "),e("em",[t._v("Wie kann man um das Koishi zu installieren?")])]),t._v(" "),e("p",[t._v("User: "),e("em",[t._v("simon300000")])]),t._v(" "),e("p",[t._v("URL: "),e("em",[t._v("https://github.com/koishijs/koishi/issues/19")])]),t._v(" "),e("p",[e("em",[t._v("Ich verstecke Englisch und Chinesisch nicht! Gab es Personen, die mir helfen kann?")])])])],1),t._v(" "),e("h4",{attrs:{id:"issue-comment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#issue-comment"}},[t._v("#")]),t._v(" Issue Comment")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Issue Comment ("),e("em",[t._v("koishijs/koishi#19")]),t._v(")")]),t._v(" "),e("p",[t._v("User: "),e("em",[t._v("simon300000")])]),t._v(" "),e("p",[t._v("URL: "),e("em",[t._v("https://github.com/koishijs/koishi/issues/19#issuecomment-576277946")])]),t._v(" "),e("p",[e("em",[t._v("Mich würde auch interessieren, was ist „CoolQ“?")])])])],1),t._v(" "),e("h3",{attrs:{id:"pull-request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-request"}},[t._v("#")]),t._v(" Pull Request")]),t._v(" "),e("h4",{attrs:{id:"pull-request-open"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-request-open"}},[t._v("#")]),t._v(" Pull Request Open")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Pull Request Opened ("),e("em",[t._v("koishijs/koishi#364852707")]),t._v(")")]),t._v(" "),e("p",[e("em",[t._v("koishijs:develop <- koishijs:experimental")])]),t._v(" "),e("p",[t._v("User: "),e("em",[t._v("simon300000")])]),t._v(" "),e("p",[t._v("URL: "),e("em",[t._v("https://github.com/koishijs/koishi/pull/20")])]),t._v(" "),e("p",[e("em",[t._v("Das ist wichtig!")])])])],1),t._v(" "),e("h4",{attrs:{id:"pull-request-comment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-request-comment"}},[t._v("#")]),t._v(" Pull Request Comment")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Pull Request Comment ("),e("em",[t._v("koishijs/koishi#20")]),t._v(")")]),t._v(" "),e("p",[t._v("User: "),e("em",[t._v("Kouchya")])]),t._v(" "),e("p",[t._v("URL: "),e("em",[t._v("https://github.com/koishijs/koishi/pull/20#issuecomment-576291300")])]),t._v(" "),e("p",[e("em",[t._v("C'est important!")])])])],1),t._v(" "),e("h4",{attrs:{id:"pull-request-review"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-request-review"}},[t._v("#")]),t._v(" Pull Request Review")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Pull Request Review ("),e("em",[t._v("koishijs/koishi#364852707")]),t._v(")")]),t._v(" "),e("p",[e("em",[t._v("User: Kouchya")])]),t._v(" "),e("p",[e("em",[t._v("URL: https://github.com/koishijs/koishi/pull/20#pullrequestreview-345349537")])]),t._v(" "),e("p",[e("em",[t._v("LGTM")])])])],1),t._v(" "),e("h4",{attrs:{id:"pull-request-review-comment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-request-review-comment"}},[t._v("#")]),t._v(" Pull Request Review Comment")]),t._v(" "),e("panel-view",{attrs:{mini:""}},[e("chat-message",{attrs:{nickname:"Koishi",avatar:"/koishi.png"}},[e("p",[t._v("[GitHub] Pull Request Review ("),e("em",[t._v("koishijs/koishi#364852707")]),t._v(")")]),t._v(" "),e("p",[t._v("Path: "),e("em",[t._v("packages/test-utils/src/mocks.ts")])]),t._v(" "),e("p",[t._v("User: "),e("em",[t._v("Shigma")])]),t._v(" "),e("p",[t._v("URL: "),e("em",[t._v("https://github.com/koishijs/koishi/pull/20#discussion_r368570320")])]),t._v(" "),e("p",[e("em",[t._v("Naming is so hard......")])])])],1)],1)}),[],!1,null,null,null);s.default=a.exports}}]);